<!DOCTYPE html>
<html style = "width: 100%; height: 100%;">
	<head>
	</head>
	<body style = "width: 100%; height: 100%;">
	<canvas id = "front-map"></canvas>
	<script src="https://d3js.org/d3.v4.min.js"></script>
	<script src="https://d3js.org/queue.v1.min.js"></script>
	<script src="https://d3js.org/d3-geo.v1.min.js"></script>
	<script src="https://d3js.org/d3-geo-projection.v1.min.js"></script>
	<script src="https://d3js.org/topojson.v2.min.js"></script>
	
	<script>
		var width = window.innerWidth,
		height = window.innerHeight,
		offset = 30;
	
		var velocity = .01,
		  t0 = Date.now();
		var canvas = d3.select("#front-map");
		
		canvas.attr("width", width)
		  .attr("height", height);
		
		var projection = d3.geoWinkel3()
		    .scale(1.4*height/Math.PI)
		    .translate([width/2, height/2+offset]);

		var context = canvas.node().getContext("2d");

		var path = d3.geoPath()
		    .projection(projection)
		    .context(context);
		
		 queue()
		 	.defer(d3.json, 'world-110m.json')
		 	.await(ready)

		function ready(error, world){
		  var land = topojson.feature(world, world.objects.land),
		    borders = topojson.mesh(world, world.objects.countries, function(a, b) { return a !== b; });
		


	d3.select("#front-map").on('mousemove', function(){
       context.clearRect(0, 0, width ,height);
				var x = d3.event.pageX;
				var y = d3.event.pageY;
			    projection.rotate([(x*360/width-180)/3.5, (180-y*360/height)/3.5]);
			    context.fillStyle = "rgba(255,0 ,0, .4)";
			    context.beginPath();
			    path(land);
			    context.fill();

			    projection.rotate([(x*360/width-180)/5, (180-y*360/height)/5]);
			    context.fillStyle = "rgba(0,0 ,255, .4)";
			    context.beginPath();
			    path(land);
			    context.fill(); 
     });
	}	
	</script>
	</body>
</htm>